(function(t){function e(e){for(var i,n,r=e[0],c=e[1],l=e[2],u=0,p=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&p.push(s[n][0]),s[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],i=!0,r=1;r<o.length;r++){var c=o[r];0!==s[c]&&(i=!1)}i&&(a.splice(e--,1),t=n(n.s=o[0]))}return t}var i={},s={app:0},a=[];function n(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=i,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/mood_app_front/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},3953:function(t,e,o){"use strict";var i=o("564a"),s=o.n(i);s.a},5490:function(t,e,o){"use strict";var i=o("a6b6"),s=o.n(i);s.a},"564a":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("2b0e"),s=o("bc3a"),a=o.n(s),n=o("a7fe"),r=o.n(n),c=o("5f5b"),l=o("b1e0"),d=(o("f9e3"),o("2dd8"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("Form"),o("Map",{attrs:{countriesCoords:t.countriesData,citiesCoords:t.citiesData,votesCoords:t.votesData}})],1)}),u=[],p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"map"}},[o("div",{staticClass:"sidebar_container"},[o("div",{staticClass:"legend_icon"},[o("b-button",{staticClass:"legend_button",attrs:{title:"Legend",variant:"light"},on:{click:t.toggleLegend}},[o("b-icon",{attrs:{icon:"info-circle",scale:"1.2"}})],1)],1),o("div",{staticClass:"legend_icon"},[o("b-button",{staticClass:"legend_button",attrs:{title:"Statistics",variant:"light"}},[o("b-icon",{attrs:{icon:"bar-chart",scale:"1.2"}})],1)],1),o("div",{staticClass:"legend_icon"},[o("b-button",{staticClass:"legend_button",attrs:{title:"Choropleth Map",variant:"light"}},[o("b-icon",{attrs:{icon:"map",scale:"1.2"}})],1)],1),o("div",{staticClass:"legend_icon"},[o("b-button",{staticClass:"legend_button",attrs:{title:"Zoom Out",variant:"light"}},[o("b-icon",{attrs:{icon:"box-arrow-up-left",scale:"1.2"}})],1)],1)]),o("div",{staticClass:"sidebar_container_right",class:{sidebar_container_right_in:t.showLegend}},[o("div",{staticClass:"legend_title"},[t._v("Legend")]),o("div",{staticClass:"legend_desc"},[t._v("MOODS (DESCRIPTION)")]),o("div",{staticClass:"legend_item"},[o("div",{staticClass:"color_item",style:{backgroundColor:""+t.options[4].color}}),o("div",{staticClass:"desc_item"},[t._v(t._s(t.options[4].mood))])]),o("div",{staticClass:"legend_item"},[o("div",{staticClass:"color_item",style:{backgroundColor:""+t.options[3].color}}),o("div",{staticClass:"desc_item"},[t._v(t._s(t.options[3].mood))])]),o("div",{staticClass:"legend_item"},[o("div",{staticClass:"color_item",style:{backgroundColor:""+t.options[2].color}}),o("div",{staticClass:"desc_item"},[t._v(t._s(t.options[2].mood))])]),o("div",{staticClass:"legend_item"},[o("div",{staticClass:"color_item",style:{backgroundColor:""+t.options[1].color}}),o("div",{staticClass:"desc_item"},[t._v(t._s(t.options[1].mood))])]),o("div",{staticClass:"legend_item"},[o("div",{staticClass:"color_item",style:{backgroundColor:""+t.options[0].color}}),o("div",{staticClass:"desc_item"},[t._v(t._s(t.options[0].mood))])])]),o("svg",{ref:"mapid",attrs:{width:t.widthNew,height:t.height}},[o("g",{ref:"countriesID"},[o("g",{ref:"rectID"}),o("g",{ref:"countID"}),o("g",{ref:"votesID"}),o("g",{ref:"citiesID"})])]),o("transition",{attrs:{name:"fade"}},[t.loader?o("div",{attrs:{id:"loader"}}):t._e()])],1)},f=[],h=(o("99af"),o("b0c0"),o("5698")),m=o("d217"),g={name:"Map",props:["countriesCoords","citiesCoords","votesCoords"],data:function(){return{width:0,widthNew:"100%",height:800,scaleIni:{x:null,y:null,k:1},selection:null,bounds:null,isRect:null,scaleOut:null,loader:!0,options:[{mood:"Very Sad",color:"#ED1613"},{mood:"Somewhat Sad",color:"#E38A04"},{mood:"Neutral",color:"#636363"},{mood:"Somewhat Happy",color:"#87B1B2"},{mood:"Very Happy",color:"#008728"}],showLegend:!1,votesRadius:3}},methods:{zoomMap:function(){var t=this.$refs.countriesID,e=this.$refs.mapid,o=this.$refs.countID,i=this;h["e"](e).call(h["g"]().translateExtent([[-18e3,-18e3],[13e3,12e3]]).scaleExtent([.1,60]).on("zoom",(function(e){h["e"](t).attr("transform",h["b"].transform).attr("stroke-width",1/h["b"].transform.k+"px"),console.log(h["b"].transform.k),i.scaleIni=h["b"].transform,h["e"](t).selectAll("text").style("font-size",(function(t){return t.properties.POP_RANK<=2?17/Math.min(i.scaleIni.k,1.2)+"px":t.properties.POP_RANK<=3?13.5/Math.min(i.scaleIni.k,1.8)+"px":t.properties.POP_RANK<=4?11/Math.min(i.scaleIni.k,1.6)+"px":10/Math.min(i.scaleIni.k,1.6)+"px"})).style("font-weight",(function(t){if(t.properties.POP_RANK<=2)return 700})).transition().duration(100).ease(h["a"]).style("opacity",(function(t){return i.scaleIni.k<.5&&t.properties.POP_RANK<2?1:i.scaleIni.k>=.5&&i.scaleIni.k<=2&&t.properties.POP_RANK<=2?1:i.scaleIni.k>1&&i.scaleIni.k<15&&t.properties.POP_RANK<=4?1:i.scaleIni.k>1.5&&i.scaleIni.k<20&&t.properties.POP_RANK<=5?1:i.scaleIni.k>3&&i.scaleIni.k<20&&t.properties.POP_RANK<=6?void 0:0})),h["e"](t).selectAll("circle").attr("r",(function(){return i.votesRadius/i.scaleIni.k}))}))).on("dblclick.zoom",null).on("click.zoom",(function(){if(h["e"](i.selection).classed("active"))console.log("hi");else{if(h["e"](i.selection).classed("rect"))h["f"](".feature").classed("active",!1).transition().duration(100).attr("opacity",1);else{h["e"](o).selectAll(".feature").classed("active",!1).attr("opacity",.5),h["e"](i.selection).classed("active",!0);var e=i.bounds[1][0]-i.bounds[0][0],s=i.bounds[1][1]-i.bounds[0][1],a=(i.bounds[0][0]+i.bounds[1][0])/2,n=(i.bounds[0][1]+i.bounds[1][1])/2,r=.9/Math.max(e/i.width,s/i.height),c=i.width/2-r*a,l=i.height/2-r*n;i.scaleIni.x=c,i.scaleIni.y=l,i.scaleIni.k=r,h["e"](t).transition().duration(750).attr("transform","".concat(i.scaleIni)).attr("stroke-width",1/i.scaleIni.k+"px"),h["e"](t).selectAll("text").style("font-size",(function(t){return t.properties.POP_RANK<=2?17/Math.min(i.scaleIni.k,1.2)+"px":t.properties.POP_RANK<=3?13.5/Math.min(i.scaleIni.k,1.8)+"px":t.properties.POP_RANK<=4?11/Math.min(i.scaleIni.k,1.6)+"px":10/Math.min(i.scaleIni.k,1.6)+"px"})).style("font-weight",(function(t){if(t.properties.POP_RANK<=2)return 700})).transition().duration(100).ease(h["a"]).style("opacity",(function(t){return i.scaleIni.k<.5&&t.properties.POP_RANK<2?1:i.scaleIni.k>=.5&&i.scaleIni.k<=2&&t.properties.POP_RANK<=2?1:i.scaleIni.k>1&&i.scaleIni.k<15&&t.properties.POP_RANK<=4?1:i.scaleIni.k>1.5&&i.scaleIni.k<20&&t.properties.POP_RANK<=5?1:i.scaleIni.k>3&&i.scaleIni.k<20&&t.properties.POP_RANK<=6?void 0:0})),console.log("ho")}h["e"](t).selectAll("circle").attr("r",(function(){return i.votesRadius/i.scaleIni.k}))}}))},toggleLegend:function(){this.showLegend=!this.showLegend}},computed:{project:function(){var t=h["c"]().center([20,40]).scale(5e3);return t}},watch:{countriesCoords:function(t){var e=m["a"](t,t.objects.data).features,o=this,i=(this.$refs.countriesID,this.$refs.countID),s=this.$refs.rectID,a=h["d"]().projection(this.project);h["e"](i).selectAll("path").data(e).enter().append("path").attr("d",a).attr("class","feature").attr("pointer-events","all").on("click",(function(t){o.selection=this,o.bounds=a.bounds(t)})),h["e"](s).append("rect").attr("x",-16973.291015625).attr("y",-10409.244140625).attr("width",31415.921875).attr("height",30181.755859375).attr("class","rect").on("click",(function(){o.selection=this})),console.log("redraw countries"),this.loader=!1},citiesCoords:function(t){var e=m["a"](t,t.objects.data).features,o=this,i=(this.$refs.countriesID,this.$refs.citiesID);h["e"](i).selectAll("text").data(e).enter().append("svg:text").text((function(t){return t.properties.CITY_NAME})).attr("transform",(function(t){return"translate("+o.project(t.geometry.coordinates)+")"})).attr("class",(function(t){return t.properties.POP_RANK<=2?"text-map-main":"text-map"})).style("opacity",(function(t){return t.properties.POP_RANK<2?1:0})),console.log("draw cities")},votesCoords:function(t){var e=m["a"](t,t.objects.data).features,o=this,i=this.$refs.votesID;h["e"](i).selectAll("circle").data(e).enter().append("circle").attr("cx",(function(t){return o.project([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]})).attr("cy",(function(t){return o.project([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]})).attr("r",o.votesRadius).style("fill",(function(t){switch(t.properties.mood){case"Very Happy":return"#008728";case"Somewhat Happy":return"#87B1B2";case"Neutral":return"#636363";case"Somewhat Sad":return"#E38A04";case"Very Sad":return"#ED1613"}})).on("mouseover",(function(t){var e=h["b"].clientX+10,o=h["b"].clientY-200;h["e"]("#map").append("div").attr("id","tooltip").style("position","absolute").style("top",o+"px").style("left",e+"px").style("border","1px solid white").style("background-color","#485566").style("border-radius","2.5%").style("padding","10px").style("box-shadow","3px 3px 2px 1px black").style("opacity",.8).html('<b style="color: white;">'.concat(t.properties.mood,'</b><br><strong style="color: #baba45;">{').concat(t.properties.tags,'}</strong><br><small style="font-weight: 0.2vw; color: white;">Voted at: ').concat(t.properties.date," - ").concat(t.properties.country.name,"</small>"))})).on("mouseleave",(function(){h["e"]("#tooltip").remove()})),console.log("Draw votes")}},created:function(){},mounted:function(){this.zoomMap(),this.width=window.innerWidth},updated:function(){}},v=g,b=(o("5490"),o("2877")),y=Object(b["a"])(v,p,f,!1,null,null,null),_=y.exports,C=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-container",{staticClass:"container_b",attrs:{fluid:""}},[o("b-row",[o("div",{staticClass:"container"},[o("ul",{staticClass:"progressbar"},[o("li",{class:{active:t.moodActive}},[t._v("CHOOSE MOOD")]),o("li",{class:{active:t.tagsActive}},[t._v("SELECT TAGS")]),o("li",{class:{active:t.geoActive}},[t._v("LOCATE ME")]),o("li",{class:{active:t.subActive}},[t._v("SUBMIT")])])])]),o("b-row",[o("transition",{attrs:{name:"fade",mode:"out-in"}},[t.form.mood?t.form.tags.length<1?o("div",{key:"two",staticClass:"form-item"},[o("div",{staticClass:"form-item-heading"},[o("h2",[t._v("Describe your mood")])]),o("br"),o("span",[o("p",[t._v("Insert from one to three words, in the form below, that describes your mood")])]),o("div",{staticClass:"form-item-main"},[o("b-form-group",{attrs:{state:t.state},scopedSlots:t._u([{key:"invalid-feedback",fn:function(){return[t._v("You must provide at least 1 tag and no more than 3")]},proxy:!0},{key:"description",fn:function(){return[o("div",{attrs:{id:"tags-validation-help"}},[t._v(" Tags must be 2 to 15 characters in length and all lower case. Enter tags separated by spaces or press enter. ")])]},proxy:!0}])},[o("b-form-tags",{attrs:{"input-id":"tags-validation","input-attrs":{"aria-describedby":"tags-validation-help"},state:t.state,"tag-validator":t.tagValidator,separator:" "},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}})],1)],1),o("div",{staticClass:"submit-section"},[o("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return t.submitTags()}}},[t._v("Next")])],1)]):t.form.location.length<1?o("div",{key:"three",staticClass:"form-item"},[o("div",{staticClass:"form-item-heading"},[o("h2",[t._v("Where are you?")])]),o("br"),o("span",[o("p",[t._v("Click in the button below to enable your geolocation and let us track your position")])]),o("div",{staticClass:"form-item-main"},[o("div",{staticClass:"geoicon"},[o("b-icon",{staticClass:"geoicon-helper",style:{fill:""+t.iconColor},attrs:{icon:"geo"}})],1),o("div",{staticClass:"button-helper"},[t.isLoading?t._e():o("b-button",{attrs:{pill:"",variant:"outline-secondary"},on:{click:function(e){return t.getlocation()}}},[t._v("Locate me")]),t.isLoading?o("b-button",{attrs:{pill:"",variant:"outline-secondary",disabled:""}},[o("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),t._v(" Locating.. ")]):t._e()],1),t.geolocationObj.errorMsg?o("div",{staticClass:"geoOk",style:{visibility:""+t.hideMegeo}},[o("p",{staticClass:"geoOktextErr"},[t._v(t._s(t.geolocationObj.errorMsg))])]):o("div",{staticClass:"geoOk",style:{visibility:""+t.hideMegeo}},[o("p",{staticClass:"geoOktext"},[t._v("Latitude: "+t._s(t.geolocationObj.lat)+", Longitude: "+t._s(t.geolocationObj.lon)+". Click next to proceed.")])])]),o("div",{staticClass:"submit-section"},[o("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return t.submitGeo()}}},[t._v("Next")])],1)]):o("div",{key:"four",staticClass:"form-item"},[o("div",{staticClass:"form-item-heading"},[o("h2",[t._v("We are Done!")])]),o("div",{staticClass:"form-item-main"},[o("transition",{attrs:{name:"loading",mode:"out-in"}},[t.serverStatus?(t.serverStatus=200)?o("div",{key:"two"},[o("span",{staticClass:"help"},[t._v("Your data has been submitted")]),o("b-icon",{staticClass:"icon-big",attrs:{icon:"check-all"}})],1):(t.serverStatus=404)?o("div",{key:"three"},[o("span",{staticClass:"help-er"},[t._v("Error! Please try again later.")]),o("b-icon",{staticClass:"icon-big-er",attrs:{icon:"exclamation-triangle-fill"}})],1):t._e():o("div",{key:"one",staticClass:"d-flex align-items-center"},[o("span",[t._v("Submitting your data. Please wait..")]),o("div",{staticClass:"spinner-border ml-auto",attrs:{role:"status","aria-hidden":"true"}})])])],1)]):o("div",{key:"one",staticClass:"form-item"},[o("div",{staticClass:"form-item-heading"},[o("h2",[t._v("What is your current mood?")])]),o("br"),o("span",[o("p",[t._v("Select one of the five options below corresponding to your current mood")])]),o("div",{staticClass:"form-item-main"},[t.selected?o("div",{staticClass:"face",style:{backgroundImage:"url("+t.faceBckrnd+")",borderColor:""+t.faceColor}}):t._e(),o("b-form-radio-group",{staticClass:"radio-helper",attrs:{options:t.options,name:"radios-stacked","value-field":"mood","text-field":"mood",stacked:""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),o("div",{staticClass:"error",style:{visibility:""+t.hideMe}},[t._v("*Please select your mood")])],1),o("div",{staticClass:"submit-section"},[o("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return t.submitMood()}}},[t._v("Next")])],1)])])],1)],1)],1)},k=[],w=(o("4160"),o("d81d"),o("a434"),o("b680"),o("d3b7"),o("acd8"),o("159b"),{name:"Form",data:function(){return{selected:"",options:[{mood:"Very Sad",img:"unhappy.svg",color:"#ED1613"},{mood:"Somewhat Sad",img:"mostly_unhappy.svg",color:"#E38A04"},{mood:"Neutral",img:"normal.svg",color:"#636363"},{mood:"Somewhat Happy",img:"mostly_happy.svg",color:"#87B1B2"},{mood:"Very Happy",img:"happy.svg",color:"#008728"}],faceColor:"",faceBckrnd:"",iconColor:"",form:{mood:"",tags:[],location:[]},hideMe:"hidden",hideMegeo:"hidden",errorMood:!1,moodActive:!1,tags:[],dirty:!1,tagsActive:!1,geoActive:!1,isLoading:!1,geolocationObj:{lon:0,lat:0,errorMsg:""},serverStatus:null,subActive:!1}},methods:{submitMood:function(){this.selected?(this.form.mood=this.selected,this.moodActive=!0,this.errorMood=!1):(this.hideMe="visible",this.errorMood=!0)},tagValidator:function(t){return t===t.toLowerCase()&&t.length>1&&t.length<16&&isNaN(t)},submitTags:function(){var t=this;this.state&&(this.tagsActive=!0,this.tags.forEach((function(e){t.form.tags.push(e)})))},getlocation:function(){var t=this;this.iconColor="",this.isLoading=!0;var e={enableHighAccuracy:!0,timeout:3e4,maximumAge:0};new Promise((function(o,i){navigator.geolocation.getCurrentPosition((function(e){o(e.coords),t.geolocationObj.lon=e.coords.longitude.toFixed(5),t.geolocationObj.lat=e.coords.latitude.toFixed(5),t.isLoading=!1,t.iconColor="#007bff",t.hideMegeo="visible"}),(function(e){i(e),t.geolocationObj,errorMsg="Something went wrong, please enable geolocation and try again",t.hideMegeo="visible"}),e)})).catch((function(t){return t}))},submitGeo:function(){var t=this;this.geolocationObj.lat&&(this.form.location.splice(0,0,parseFloat(this.geolocationObj.lon)),this.form.location.splice(1,0,parseFloat(this.geolocationObj.lat)),this.geoActive=!0,this.subActive=!0),this.form.mood&&this.form.tags&&this.form.location&&this.axios.post("https://morning-forest-91172.herokuapp.com/form",this.form).then((function(e){t.serverStatus=e.status})).catch((function(e){t.serverStatus=e.response.status}))}},computed:{state:function(){return this.dirty?this.tags.length>0&&this.tags.length<4:null}},watch:{selected:function(t){var e=this;this.options.map((function(o){o.mood==t&&(e.faceColor=o.color,e.faceBckrnd=o.img,console.log(o.mood))}))},tags:function(t,e){this.dirty=!0}},updated:function(){}}),x=w,O=(o("3953"),Object(b["a"])(x,C,k,!1,null,null,null)),I=O.exports,P={name:"app",components:{Map:_,Form:I},data:function(){return{countriesData:[],citiesData:[],votesData:[]}},methods:{importCountries:function(){var t=this;this.axios.get("https://morning-forest-91172.herokuapp.com/countries").then((function(t){return t})).then((function(e){t.countriesData=e.data})).catch((function(t){throw new Error(t)}))},importCities:function(){var t=this;this.axios.get("https://morning-forest-91172.herokuapp.com/cities").then((function(t){return t})).then((function(e){t.citiesData=e.data})).catch((function(t){throw new Error(t)}))},importVotes:function(){var t=this;this.axios.get("https://morning-forest-91172.herokuapp.com/votes").then((function(t){return t})).then((function(e){t.votesData=e.data})).catch((function(t){throw new Error(t)}))}},mounted:function(){this.importCountries(),this.importCities(),this.importVotes()}},A=P,M=Object(b["a"])(A,d,u,!1,null,null,null),S=M.exports;i["default"].config.productionTip=!1,i["default"].use(r.a,a.a),i["default"].use(c["a"]),i["default"].use(l["a"]),new i["default"]({render:function(t){return t(S)}}).$mount("#app")},a6b6:function(t,e,o){}});
//# sourceMappingURL=app.1d238299.js.map